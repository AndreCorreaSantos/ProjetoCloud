#!/bin/bash

# Updating and installing required packages...
sudo apt-get update
sudo apt-get install -y python3-pip python3-venv git

# Cloning the repository...
git clone https://github.com/AndreCorreaSantos/locust /home/ubuntu/locust
sudo chown -R ubuntu:ubuntu ~/locust
cd /home/ubuntu/locust

# Exporting environment variables...
export DNS_NAME=${dns_name}

# Creating virtual environment...
python3 -m venv env
source env/bin/activate
pip install -r requirements.txt

locust -f locustfile.py